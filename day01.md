# 브라우저의 동작 원리

> 브라우저는 HTML과 CSS 명세에 따라 HTML 파일을 해석해서 표시

### 브라우저의 기본 구조
1. 사용자 인터페이스
   - 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분
2. 브라우저 엔진
   - 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
3. 렌더링 엔진
    - 요청한 콘텐츠를 표시   
    ex) html을 요청하면 html과 css를 파싱하여 화면에 표시
4. 통신
    - http 요청과 같은 네트워크 호출에 사용됨. 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행됨
5. UI 백엔드
    - 콤보 박스와 창 같은 기본적인 장치를 그림. 플랫폼에서 명시하지 않은 일반적인 인터페이스로 OS 사용자 인터페이스 체계를 사용
6. 자바스크립트 해석기
    - 자바스크립트 코드를 해석하고 실행
7. 자료 저장소
    - 자료를 저장하는 계층   
      쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크에 저장할 필요가 있음   
      html5 명세에는 브라우저가 지원하는 '<span style="background-color: #fff5b1">웹 데이터 베이스</span>'가 정의되어 있음

![브라우저의 주요 구성 요소](https://github.com/marybin99/cs/assets/110241993/a3455a90-605c-4037-a1de-e6b27141a78c)

## 렌더링 엔진
- 요청 받은 내용을 브라우저 화면에 표시하는 역할
- 게코(Gecko) 엔진: 파이어폭스   
  웹킷(Webkit) 엔진: 사파리, 크롬

## 렌더링 엔진의 동작 과정
- 통신으로부터 요청한 문서의 내용을 얻는 것으로 시작하는데 문서의 내용은 보통 8KB 단위로 전송됨   

![렌더링 엔진의 동작 과정](https://github.com/marybin99/cs/assets/110241993/dff6cfbd-55de-4ceb-a980-dc8e6ad7477d)
   
   1. HTML 마크업을 처리하고 DOM 트리를 빌드한다.   
   ("<b>무엇을</b>" 그릴지 결정)
   2. CSS 마크업을 처리하고 CSSOM 트리를 빌드한다.   
   ("<b>어떻게</b>" 그릴지 결정)
   3. DOM 및 CSSOM을 결합하여 렌더링 트리를 형성한다.   
   ("<b>화면에 그려질 것만</b>" 결정)
   4. 렌더링 트리에서 레이아웃을 실행하여 각 노드의 기하학적 형태를 계산한다.   
   ("<b>Box-Model</b>"을 생성)
   5. 개별 노드를 화면에 페인트한다. (혹은 래스터화)
